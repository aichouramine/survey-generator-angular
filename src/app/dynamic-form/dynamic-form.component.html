<div *ngIf="!finishSurvey && form && questions">

  <div class="small-wrapper rounded">
    <div class="text-center">
        <img src="../../assets/UPC_GreenBG_sRGB.svg" style="max-width: 75px;margin-top: -15px;" class="mb-5"/>
    </div>

    <div *ngIf="activePage == 1" class="mb-5">
    <h3 class="text-center mb-5">Twoja opinia jest dla nas ważna</h3>
    <p>Podziel się z nami swoją opinią, dotyczącą korzystania z serwisu.</p>
    <p>Twoje uwagi pomogą nam w dostosowaniu serwisu, do Twoich oczekiwań.</p>
  </div>

    <form (ngSubmit)="onSubmit()" [formGroup]="form">

      <div *ngFor="let question of questions">
        <div [ngSwitch]="question.activePage">
          <div *ngSwitchCase="1">
            <div *ngIf="activePage == 1">
              <app-question [question]="question" [form]="form" [activePage]="activePage"
                (activePageChanged)="activePageChanged($event)" (startSurveyChanged)="startSurveyChanged($event)"></app-question>
            </div>
          </div>
          <div *ngSwitchCase="2">
            <div *ngIf="activePage == 2">
              <app-question [question]="question" [form]="form" [activePage]="activePage"
                (activePageChanged)="activePageChanged($event)" (startSurveyChanged)="startSurveyChanged($event)"></app-question>
            </div>
          </div>
          <div *ngSwitchCase="3">
            <div *ngIf="activePage == 3">
              <app-question [question]="question" [form]="form" [activePage]="activePage"
                (activePageChanged)="activePageChanged($event)" (startSurveyChanged)="startSurveyChanged($event)"></app-question>
            </div>
          </div>
        </div>
      </div>



        <div class="form-row justify-content-center mt-4 align-items-center" *ngIf="activePage == 1">
            <div class="col-4 text-left step-title-box"><span class="text-left">Krok 1/3</span></div>
            <div class="col-8 text-md-left text-right">
              <button type="button" class="btn btn-success font-weight-bold" *ngIf="allActivePages" (click)="checkAndGo(1,1)">Dalej</button>
            </div>
        </div>
        <div class="form-row justify-content-center mt-4 align-items-center" *ngIf="activePage == 2">
            <div class="col-md-2 col-3 text-left step-title-box"><span class="text-left">Krok 2/3</span></div>
          <div class="col-md-4 col-3 text-md-right text-center mb-0">
              <div class="text-success font-weight-bold cursor-pointer" *ngIf="activePage > 1"
                  (click)="activePage = activePage-1">Wstecz
              </div>
          </div>
          <div class="col-6 text-right">
              <button type="button" class="btn btn-success font-weight-bold" *ngIf="allActivePages" (click)="checkAndGo(1,2)">Dalej</button>
            </div>
        </div>
        <div class="form-row justify-content-center mt-4 align-items-center" *ngIf="activePage == 3">
            <div class="col-md-2 col-3 text-left step-title-box"><span class="text-left">Krok 3/3</span></div>
            <div class="col-md-4 col-3 text-md-right text-center mb-0">
                <div class="text-success font-weight-bold cursor-pointer" *ngIf="activePage > 1" (click)="activePage = activePage-1">Wstecz
                </div>
            </div>
        <div class="col-6 text-right">
            <button type="submit" class="btn btn-success font-weight-bold" *ngIf="allActivePages[activePage - 1] == allActivePages.length">Wyślij</button>
          </div>
      </div>

    </form>
  </div>
</div>

<div *ngIf="flashMessage" class="end-box text-center font-weight-bold small-wrapper rounded mb-5">
    <div>
        <img src="../../assets/UPC_GreenBG_sRGB.svg" style="max-width: 75px;" class="logo-box mb-5"/>
    </div>
  <div *ngIf="finishSurvey" class="mb-5">
      Koniec
  </div>
  <small>{{flashMessage}}</small>
</div>
